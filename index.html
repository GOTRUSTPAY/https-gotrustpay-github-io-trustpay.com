<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>GOPAY AFRICA</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{margin:0;font-family:Arial;background:#021c1b;color:#d1fae5}
.hidden{display:none}
header{padding:15px;background:#012b28;display:flex;align-items:center;justify-content:space-between}
header svg{height:40px;width:auto}
nav a{margin-right:15px;color:#5eead4;font-weight:bold;cursor:pointer;text-decoration:none}
main{max-width:700px;margin:auto;padding:20px}
input,select,button{width:100%;padding:12px;margin:6px 0;border-radius:10px;border:none}
button{background:#14b8a6;font-weight:bold;cursor:pointer}
.panel{background:#043837;padding:20px;border-radius:16px;margin-top:20px}
.card{background:#054f4b;padding:20px;border-radius:18px;display:flex;justify-content:space-between;flex-wrap:wrap;margin-top:20px}
#qr{background:#fff;padding:8px;border-radius:10px;width:120px;height:120px}
.actions{display:grid;grid-template-columns:repeat(4,1fr);gap:15px;margin-top:20px}
@media(max-width:500px){.actions{grid-template-columns:repeat(2,1fr)}}
.action{background:#0fb9a8;padding:20px;border-radius:16px;text-align:center;font-weight:bold;cursor:pointer}
footer{padding:20px;text-align:center;background:#012b28;color:#5eead4;margin-top:40px}
footer a{color:#5eead4;text-decoration:none;margin:0 5px;cursor:pointer}
.tx,.activity{background:#043837;padding:10px;border-radius:10px;margin-top:5px}
</style>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>

<body>

<header>
<!-- Logo SVG GoPay Africa -->
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 50">
  <text x="0" y="35" font-size="30" fill="#5eead4" font-weight="bold" font-family="Arial">GoPay Africa</text>
</svg>
<nav>
 <a onclick="show('home')">Accueil</a>
 <a id="loginNav" onclick="show('login')">Connexion</a>
 <a id="regNav" onclick="show('register')">Inscription</a>
 <a id="logoutNav" class="hidden" onclick="logout()">D√©connexion</a>
</nav>
</header>

<main>

<div id="home" class="panel">
<h2>GOPAY AFRICA</h2>
<b>Payments for a Connected Africa</b>
<p>Paiements digitaux simples, sans carte bancaire.</p>
</div>

<div id="login" class="panel hidden">
<h3>Connexion</h3>
<input id="lEmail" placeholder="Email">
<input id="lPass" type="password" placeholder="Mot de passe">
<button onclick="login()">Se connecter</button>
</div>

<div id="register" class="panel hidden">
<h3>Inscription</h3>
<input id="rName" placeholder="Nom complet">
<input id="rPhone" placeholder="T√©l√©phone">
<input id="rEmail" placeholder="Email">
<input id="rPass" type="password" placeholder="Mot de passe">
<select id="rRole">
<option value="user">Utilisateur</option>
<option value="merchant">Commer√ßant</option>
<option value="agent">Agent GoPay</option>
</select>
<button onclick="register()">Cr√©er le compte</button>
</div>

<div id="dash" class="hidden">

<div class="card">
<div>
<h3 id="uName"></h3>
<b>ID GoPay : <span id="uId"></span></b>
<p>Carte digitale s√©curis√©e</p>
<h2>Solde : <span id="uBal"></span> USD</h2>
<small>Authentification biom√©trique via t√©l√©phone</small>
</div>
<div id="qr"></div>
</div>

<div class="actions">
<div class="action" onclick="openP('pay')">üí≥ Paiement</div>
<div id="cashinBtn" class="action" onclick="openP('cashin')">‚ûï Cash‚Äëin</div>
<div id="cashoutBtn" class="action" onclick="openP('cashout')">‚ûñ Cash‚Äëout</div>
<div class="action" onclick="openP('history')">üìú Historique</div>
</div>

<div id="pay" class="panel hidden">
<h3>Paiement GoPay</h3>
<input id="payTo" placeholder="ID GoPay destinataire">
<input id="payAmount" type="number" placeholder="Montant USD">
<button onclick="pay()">Payer</button>
</div>

<div id="cashin" class="panel hidden">
<h3>Cash‚Äëin (agent)</h3>
<input id="cinAmount" type="number" placeholder="Montant USD">
<button onclick="cashin()">Valider</button>
</div>

<div id="cashout" class="panel hidden">
<h3>Cash‚Äëout (agent)</h3>
<input id="coutAmount" type="number" placeholder="Montant USD">
<button onclick="cashout()">Valider</button>
</div>

<div id="history" class="panel hidden">
<h3>Historique</h3>
<div id="txs"></div>
</div>

<div id="recentActivities" class="panel hidden">
<h3>Activit√© r√©cente</h3>
<div id="activities"></div>
</div>

</main>

<footer>
  &copy; 2026 GoPay Africa | 
  <a onclick="show('legal')">Mentions l√©gales</a> | 
  <a onclick="show('about')">Qui sommes-nous</a> | 
  <a onclick="show('partners')">Nos partenaires</a> | 
  <a onclick="show('contact')">Nous contacter</a>
</footer>

<div id="legal" class="panel hidden">
  <h3>Mentions l√©gales</h3>
  <p>GoPay Africa est une plateforme de paiement digital s√©curis√©e, op√©rant conform√©ment aux r√©glementations locales.</p>
</div>
<div id="about" class="panel hidden">
  <h3>Qui sommes-nous</h3>
  <p>Nous facilitons les paiements digitaux pour l‚ÄôAfrique connect√©e. Notre mission est de rendre les transactions simples, rapides et s√©curis√©es.</p>
</div>
<div id="partners" class="panel hidden">
  <h3>Nos partenaires</h3>
  <p>Banques locales, commer√ßants, services financiers et agents certifi√©s GoPay.</p>
</div>
<div id="contact" class="panel hidden">
  <h3>Nous contacter</h3>
  <p>Email : contact@gopay.africa<br>T√©l√©phone : +237 699 000 000</p>
</div>

<script>
firebase.initializeApp({
 apiKey:"AIzaSyA-p_WgDeRhaGsP0zJYmd9aIw7GwuC6k6g",
 authDomain:"gotrustpay-e6524.firebaseapp.com",
 projectId:"gotrustpay-e6524"
});
const auth=firebase.auth(),db=firebase.firestore();

function show(id){
 document.querySelectorAll("main>div, #legal, #about, #partners, #contact").forEach(x=>x.classList.add("hidden"));
 document.getElementById(id).classList.remove("hidden");
}
function openP(id){
 ["pay","cashin","cashout","history","recentActivities"].forEach(x=>document.getElementById(x).classList.add("hidden"));
 document.getElementById(id).classList.remove("hidden");
}

function genId(){return "GP-"+Math.random().toString(36).substring(2,10).toUpperCase()}

function register(){
 auth.createUserWithEmailAndPassword(rEmail.value,rPass.value).then(c=>{
  const id=genId();
  db.collection("users").doc(c.user.uid).set({
   name:rName.value, phone:rPhone.value,
   role:rRole.value, gid:id, balance:20
  });
 });
}

function login(){auth.signInWithEmailAndPassword(lEmail.value,lPass.value)}
function logout(){auth.signOut()}

auth.onAuthStateChanged(async u=>{
 if(!u){
   show("home");
   loginNav.classList.remove("hidden");
   regNav.classList.remove("hidden");
   logoutNav.classList.add("hidden");
   return;
 }
 loginNav.classList.add("hidden");
 regNav.classList.add("hidden");
 logoutNav.classList.remove("hidden");
 const d=await db.collection("users").doc(u.uid).get(); 
 const x=d.data();
 show("dash");
 uName.textContent=x.name+" ("+x.role+")";
 uId.textContent=x.gid;
 uBal.textContent=x.balance.toFixed(2);
 qr.innerHTML=""; new QRCode(qr,{text:x.gid,width:120,height:120});

 loadTx();
 recentActivity();

 if(x.role!=="agent"){
   document.getElementById("cashinBtn").style.display="none";
   document.getElementById("cashoutBtn").style.display="none";
 }
});

function tx(type,amount,to){
 db.collection("transactions").add({uid:auth.currentUser.uid,type,amount,to,date:new Date()});
}

async function pay(){
 const a=+payAmount.value;
 const d=await db.collection("users").doc(auth.currentUser.uid).get();
 if(a>d.data().balance)return alert("Solde insuffisant");
 db.collection("users").doc(auth.currentUser.uid).update({balance:firebase.firestore.FieldValue.increment(-a)});
 tx("Paiement",-a,payTo.value);
}

function cashin(){
 db.collection("users").doc(auth.currentUser.uid).update({balance:firebase.firestore.FieldValue.increment(+cinAmount.value)});
 tx("Cash‚Äëin",+cinAmount.value,"Agent");
}

function cashout(){
 db.collection("users").doc(auth.currentUser.uid).update({balance:firebase.firestore.FieldValue.increment(-coutAmount.value)});
 tx("Cash‚Äëout",-coutAmount.value,"Agent");
}

async function loadTx(){
 txs.innerHTML="";
 const q=await db.collection("transactions").where("uid","==",auth.currentUser.uid).orderBy("date","desc").get();
 q.forEach(d=>{
  const t=d.data();
  txs.innerHTML+=`<div class="tx">${t.type} : ${t.amount} USD</div>`;
 });
}

// ACTIVIT√â R√âCENTE AUTOMATIQUE
const namesPool = [
 "Alice","Bob","Charlie","David","Eve","Fabrice","Gis√®le",
 "Hugo","Iris","Jean","Kevin","Laura","Marc","Nina","Olivier"
];
let usedNames = [];

function generateActivity() {
 if (usedNames.length >= namesPool.length) return;
 let name;
 do { name = namesPool[Math.floor(Math.random() * namesPool.length)]; } while (usedNames.includes(name));
 usedNames.push(name);
 const actions = ["a effectu√© un paiement","a recharg√© son compte","a pay√© un commer√ßant","a re√ßu un paiement"];
 const act = actions[Math.floor(Math.random() * actions.length)];
 const div = document.createElement("div");
 div.className = "activity";
 div.textContent = `${name} ${act}`;
 const box = document.getElementById("activities");
 box.prepend(div);
 if (box.children.length > 6) box.removeChild(box.lastChild);
 document.getElementById("recentActivities").classList.remove("hidden");
}

// Initial call + interval toutes les 12 secondes
generateActivity();
setInterval(generateActivity, 12000);

</script>

</body>
</html>

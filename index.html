<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GoTrust Pay</title>
<style>
  body { margin:0; font-family: Arial, sans-serif; background:#f5f5f5; color:#333; }
  header { background:#0a74da; color:#fff; padding:20px; text-align:center; }
  nav { display:flex; justify-content:center; gap:15px; padding:10px; background:#0073c2; flex-wrap:wrap;}
  nav a { color:#fff; text-decoration:none; font-weight:bold; }
  main { max-width:1000px; margin:20px auto; padding:20px; background:#fff; border-radius:10px; box-shadow:0 0 10px rgba(0,0,0,0.1); }
  h2 { color:#0a74da; margin-top:0; }
  button { background:#0a74da; color:#fff; border:none; padding:10px 20px; border-radius:5px; cursor:pointer; margin-top:5px; }
  input, select, textarea { padding:10px; margin:5px 0; width:100%; box-sizing:border-box; }
  .section { margin-bottom:40px; }
  .hidden { display:none; }
  .card { border:1px solid #ddd; padding:15px; border-radius:8px; margin-bottom:15px; background:#f9f9f9; }
  .qr { width:100px; height:100px; background:#ccc; display:inline-block; margin-right:10px; vertical-align:middle; }
  label { font-weight:bold; display:block; margin-top:10px; }
  .menu { display:flex; gap:10px; margin-bottom:20px; flex-wrap:wrap; }
</style>
</head>
<body>

<header>
  <h1>GoTrust Pay</h1>
  <p>Plateforme financière sécurisée</p>
</header>

<nav>
  <a href="#" onclick="showSection('home')">Accueil</a>
  <a href="#" onclick="showSection('login')">Connexion</a>
  <a href="#" onclick="showSection('register')">Devenir partenaire</a>
</nav>

<main>

<div class="section" id="home">
  <h2>Bienvenue sur GoTrust Pay</h2>
  <p>Plateforme financière sécurisée.</p>
</div>

<!-- LOGIN -->
<div class="section hidden" id="login">
  <h2>Connexion</h2>
  <label>Statut</label>
  <select id="loginStatus">
    <option value="client">Client</option>
    <option value="admin">Administrateur</option>
  </select>
  <input type="text" id="loginId" placeholder="ID / Nom admin">
  <input type="password" id="loginPassword" placeholder="Mot de passe">
  <button onclick="login()">Se connecter</button>
</div>

<!-- REGISTER -->
<div class="section hidden" id="register">
  <h2>Créer un compte</h2>
  <input type="text" id="regName" placeholder="Nom complet">
  <input type="email" id="regEmail" placeholder="Email">
  <input type="text" id="regPhone" placeholder="Téléphone">
  <input type="password" id="regPassword" placeholder="Mot de passe">
  <input type="text" id="regCode" placeholder="Code de retrait">
  <button onclick="register()">S'inscrire</button>
</div>

<!-- CLIENT DASHBOARD -->
<div class="section hidden" id="clientDashboard">
  <h2>Tableau de bord Client</h2>
  <p>ID : <span id="clientIdDisplay"></span></p>
  <p>Carte : <span id="clientCardNumber"></span></p>
  <p>Solde : <span id="clientBalance"></span></p>
</div>

<!-- ADMIN DASHBOARD -->
<div class="section hidden" id="adminDashboard">
  <h2>Tableau de bord Admin</h2>
  <div id="clientsList"></div>
</div>

</main>

<script>
/* Navigation */
function showSection(id){
  document.querySelectorAll('.section').forEach(s=>s.classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
}

/* Données */
let users = [];
let currentUser = null;

/* Admin FIXE */
const ADMIN_ID = "gopay";
const ADMIN_PASSWORD = "admin243";

/* Utils */
function generateId(){ return Math.floor(10000000 + Math.random()*90000000); }
function generateCard(){ return Math.floor(100000000000 + Math.random()*900000000000); }

/* REGISTER → login auto */
function register(){
  let user = {
    id: generateId(),
    name: regName.value,
    email: regEmail.value,
    phone: regPhone.value,
    password: regPassword.value,
    code: regCode.value,
    balance: 0,
    cardNumber: generateCard(),
    status: "client"
  };

  users.push(user);
  currentUser = user;

  showSection('clientDashboard');
  updateClientCard(user);
}

/* LOGIN corrigé */
function login(){
  let status = loginStatus.value;
  let id = loginId.value;
  let pwd = loginPassword.value;

  /* ADMIN */
  if(status === "admin"){
    if(id === ADMIN_ID && pwd === ADMIN_PASSWORD){
      showSection('adminDashboard');
      renderAdminClients();
      return;
    } else {
      alert("Accès admin refusé");
      return;
    }
  }

  /* CLIENT */
  let user = users.find(u => u.id == id && u.password === pwd);
  if(!user){ alert("Identifiants incorrects"); return; }

  currentUser = user;
  showSection('clientDashboard');
  updateClientCard(user);
}

function updateClientCard(u){
  clientIdDisplay.textContent = u.id;
  clientCardNumber.textContent = u.cardNumber;
  clientBalance.textContent = u.balance.toFixed(2)+" USD";
}

function renderAdminClients(){
  clientsList.innerHTML = "";
  users.forEach(u=>{
    clientsList.innerHTML += `<div class="card">${u.name} - ${u.balance} USD</div>`;
  });
}
</script>

</body>
</html>

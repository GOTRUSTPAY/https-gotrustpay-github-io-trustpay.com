<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>GoPay Africa Premium</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@2.1.4/css/boxicons.min.css">

<style>
body{margin:0;font-family:Roboto;background:#eef5f2;color:#011a27;}
header{position:fixed;top:0;width:100%;background:#0d1b2a;display:flex;justify-content:space-between;padding:12px 20px;z-index:1000;}
.logo{color:white;font-weight:700;background:#2e7d32;padding:6px 14px;border-radius:8px;font-size:22px;}
.menu3{position:fixed;top:10px;right:20px;background:#0d1b2a;color:white;padding:12px;border-radius:10px;cursor:pointer;z-index:1001;font-size:22px;}
.menuPanel{position:fixed;top:50px;right:20px;background:white;border-radius:14px;box-shadow:0 5px 20px rgba(0,0,0,0.2);display:none;padding:15px;width:250px;}
.menuPanel p{margin:0;padding:10px;cursor:pointer;border-bottom:1px solid #eee;}
.menuPanel p:hover{background:#2e7d32;color:white;border-radius:8px;}
.hero{height:90vh;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;background:linear-gradient(rgba(0,0,0,0.6),rgba(0,0,0,0.6)),url('https://images.unsplash.com/photo-1556740749-887f6717d7e4');background-size:cover;color:white;}
.hero h1{font-size:48px;margin-bottom:10px;}
.hero p{font-size:22px;margin-bottom:20px;}
.hero button{background:#2e7d32;color:white;padding:14px 30px;border:none;border-radius:10px;cursor:pointer;font-size:18px;}
</style>
</head>
<body>

<header>
<div class="logo">GoPay Africa</div>
<div id="menu3" class="menu3" onclick="toggleMenu()">☰</div>
</header>

<div id="menuPanel" class="menuPanel">
<p onclick="showSection('why')">Pourquoi</p>
<p onclick="showSection('success')">Succès</p>
<p onclick="showSection('values')">Valeurs</p>
<p onclick="showSection('mission')">Mission</p>
<p onclick="showSection('partners')">Partenaires</p>
<p onclick="showSection('marketing')">Réalisations</p>
<p onclick="showSection('contact')">Contact</p>
<p onclick="openLogin()">Connexion</p>
</div>

<section class="hero">
<h1>Bienvenue sur GoPay Africa</h1>
<p>Paiements rapides et sécurisés</p>
<button onclick="openLogin()">Se connecter</button>
</section>

<!-- MODAL LOGIN -->
<div id="loginModal" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);justify-content:center;align-items:center;display:flex;z-index:2000;">
<div style="background:white;padding:30px;border-radius:14px;width:320px;">
<h3>Connexion</h3>
<input id="lEmail" placeholder="Email" style="width:100%;padding:10px;margin:8px 0;">
<input id="lPass" type="password" placeholder="Mot de passe" style="width:100%;padding:10px;margin:8px 0;">
<button onclick="login()" style="width:100%;padding:12px;margin-top:8px;background:#2e7d32;color:white;border:none;border-radius:8px;">Connexion</button>
<button onclick="showRegister()" style="width:100%;padding:12px;margin-top:8px;background:#555;color:white;border:none;border-radius:8px;">Créer compte</button>
<button onclick="closeLogin()" style="width:100%;padding:12px;margin-top:8px;background:#999;color:white;border:none;border-radius:8px;">Fermer</button>
</div>
</div>

<div id="registerModal" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);justify-content:center;align-items:center;display:flex;z-index:2000;">
<div style="background:white;padding:30px;border-radius:14px;width:320px;">
<h3>Créer compte</h3>
<input id="rName" placeholder="Nom" style="width:100%;padding:10px;margin:8px 0;">
<input id="rEmail" placeholder="Email" style="width:100%;padding:10px;margin:8px 0;">
<input id="rPass" type="password" placeholder="Mot de passe" style="width:100%;padding:10px;margin:8px 0;">
<select id="rRole" style="width:100%;padding:10px;margin:8px 0;">
<option value="client">Client</option>
<option value="agent">Agent</option>
<option value="admin">Admin</option>
</select>
<button onclick="register()" style="width:100%;padding:12px;margin-top:8px;background:#2e7d32;color:white;border:none;border-radius:8px;">Créer</button>
<button onclick="closeRegister()" style="width:100%;padding:12px;margin-top:8px;background:#999;color:white;border:none;border-radius:8px;">Fermer</button>
</div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
<script>
firebase.initializeApp({
apiKey:"AIzaSyA-p_WgDeRhaGsP0zJYmd9aIw7GwuC6k6g",
authDomain:"gotrustpay-e6524.firebaseapp.com",
projectId:"gotrustpay-e6524"
});
<!-- DASHBOARDS -->
<div id="clientDash" style="display:none;padding:100px 20px;">
<div class="finCard" style="background:linear-gradient(45deg,#0d1b2a,#2e7d32);color:white;border-radius:18px;padding:20px;margin-bottom:20px;">
<h3 id="cName"></h3>
<p>Solde: $<span id="cBalance"></span></p>
<canvas id="cQR"></canvas>
</div>

<h3>Historique Récent</h3>
<div id="clientHistory"></div>

<h3>Activités Récentes</h3>
<div id="recentActivities"></div>
</div>

<div id="agentDash" style="display:none;padding:100px 20px;">
<h2>Dashboard Agent</h2>
<p>Gestion cash-in / cash-out clients</p>
<div id="agentTransactions"></div>
</div>

<div id="adminDash" style="display:none;padding:100px 20px;">
<h2>Dashboard Admin</h2>
<div id="adminUsers"></div>
<div id="adminStats"></div>
</div>

<script>
// Références aux dashboards
const clientHistoryDiv=document.getElementById('clientHistory');
const recentActivitiesDiv=document.getElementById('recentActivities');
const agentTransactionsDiv=document.getElementById('agentTransactions');
const adminUsersDiv=document.getElementById('adminUsers');
const adminStatsDiv=document.getElementById('adminStats');

function loadDashboards(uid){
db.collection("users").doc(uid).get().then(doc=>{
let u=doc.data();
if(u.role==='client'){
document.getElementById('clientDash').style.display='block';
document.getElementById('agentDash').style.display='none';
document.getElementById('adminDash').style.display='none';
document.getElementById('cName').innerText=u.name;
document.getElementById('cBalance').innerText=u.balance;
QRCode.toCanvas(document.getElementById('cQR'),uid);
loadClientHistory(uid);
loadRecentActivities(uid);
}
if(u.role==='agent'){
document.getElementById('agentDash').style.display='block';
document.getElementById('clientDash').style.display='none';
document.getElementById('adminDash').style.display='none';
loadAgentTransactions();
}
if(u.role==='admin'){
document.getElementById('adminDash').style.display='block';
document.getElementById('clientDash').style.display='none';
document.getElementById('agentDash').style.display='none';
loadAdminUsers();
loadAdminStats();
}
});

// Rafraîchissement automatique toutes les 3 secondes pour clients
setInterval(()=>{
auth.currentUser && auth.currentUser.uid && loadClientHistory(auth.currentUser.uid);
auth.currentUser && auth.currentUser.uid && loadRecentActivities(auth.currentUser.uid);
},3000);
}

// Historique client
function loadClientHistory(uid){
db.collection("transactions").where("user","==",uid).orderBy("timestamp","desc").get().then(snap=>{
clientHistoryDiv.innerHTML='';
snap.forEach(doc=>{
clientHistoryDiv.innerHTML+=`<p>${doc.data().type} - $${doc.data().amount}</p>`;
});
});
}

// Activités récentes animées (clients)
function loadRecentActivities(uid){
db.collection("transactions").orderBy("timestamp","desc").limit(5).get().then(snap=>{
recentActivitiesDiv.innerHTML='';
snap.forEach(doc=>{
recentActivitiesDiv.innerHTML+=`<p>${doc.data().user} - ${doc.data().type} - $${doc.data().amount}</p>`;
});
});
}

// Agent transactions
function loadAgentTransactions(){
db.collection("transactions").orderBy("timestamp","desc").get().then(snap=>{
agentTransactionsDiv.innerHTML='';
snap.forEach(doc=>{
agentTransactionsDiv.innerHTML+=`<p>${doc.data().user} - ${doc.data().type} - $${doc.data().amount}</p>`;
});
});
}

// Admin utilisateurs
function loadAdminUsers(){
db.collection("users").get().then(snap=>{
adminUsersDiv.innerHTML='';
snap.forEach(doc=>{
adminUsersDiv.innerHTML+=`<p>${doc.data().name} - ${doc.data().role} - Solde: $${doc.data().balance}</p>`;
});
});
}

// Admin stats (simple exemple)
function loadAdminStats(){
db.collection("transactions").get().then(snap=>{
let total=snap.docs.reduce((acc,d)=>acc+d.data().amount,0);
adminStatsDiv.innerHTML=`<h3>Total Transactions: $${total}</h3><p>Nombre de transactions: ${snap.docs.length}</p>`;
});
}

// Logout global
function logout(){
auth.signOut().then(()=>location.reload());
}

// Auto load dashboards si connecté
auth.onAuthStateChanged(user=>{
if(user) loadDashboards(user.uid);
});
</script>
const auth=firebase.auth();
const db=firebase.firestore();

function toggleMenu(){
const panel=document.getElementById('menuPanel');
panel.style.display = panel.style.display==='block'?'none':'block';
}

function showSection(id){
alert("Cette section sera visible ici: "+id);
toggleMenu();
}

function openLogin(){document.getElementById('loginModal').style.display='flex';}
function closeLogin(){document.getElementById('loginModal').style.display='none';}
function showRegister(){closeLogin();document.getElementById('registerModal').style.display='flex';}
function closeRegister(){document.getElementById('registerModal').style.display='none';}

async function register(){
const cred=await auth.createUserWithEmailAndPassword(rEmail.value,rPass.value);
await db.collection("users").doc(cred.user.uid).set({name:rName.value,email:rEmail.value,role:rRole.value,balance:50});
closeRegister();
}

async function login(){
const cred=await auth.signInWithEmailAndPassword(lEmail.value,lPass.value);
alert("Connexion réussie");
closeLogin();
}
  
</script>

</body>
</html>

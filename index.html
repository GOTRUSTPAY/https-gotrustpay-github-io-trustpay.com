<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>GoPay Africa Premium</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@2.1.4/css/boxicons.min.css">

<style>
body {margin:0; font-family:Roboto; scroll-behavior:smooth; background:#0b0f1a;}
header {position:fixed; top:0; width:100%; background:transparent; display:flex; justify-content:space-between; padding:12px 20px; z-index:1000;}
.logo {color:white; font-weight:700; font-size:22px;}
.menu3 {position:fixed; top:10px; right:20px; background:#2e7d32; color:white; padding:12px; border-radius:12px; cursor:pointer; z-index:1001; font-weight:700;}
.menuPanel {position:fixed; top:50px; right:20px; background:white; border-radius:14px; box-shadow:0 5px 20px rgba(0,0,0,0.3); display:none; padding:15px; width:220px; z-index:1002;}
.menuPanel p {cursor:pointer; padding:10px; margin:0; border-bottom:1px solid #ddd;}
.menuPanel p:hover {background:#f1f1f1;}

.hero {height:100vh; color:white; display:flex; flex-direction:column; justify-content:center; align-items:center;
background:linear-gradient(rgba(0,0,0,0.4),rgba(0,0,0,0.4)),
url('https://images.unsplash.com/photo-1501785888041-af3ef285b470'); background-size:cover; background-position:center; text-align:center;}
.hero h1 {font-size:48px; margin-bottom:20px; text-shadow:2px 2px 6px black;}
.hero button {background:#2e7d32; color:white; padding:16px 40px; border:none; border-radius:14px; cursor:pointer; font-size:22px; box-shadow:0 8px 20px rgba(0,0,0,0.4); transition:0.3s;}
.hero button:hover {transform:translateY(-3px); box-shadow:0 12px 24px rgba(0,0,0,0.5);}

.section {padding:100px 20px; background:rgba(5,10,30,0.8); color:white; margin-bottom:20px; border-radius:14px; max-width:1000px; margin-left:auto; margin-right:auto;}
.section h2 {display:flex; align-items:center; gap:12px; font-size:28px; margin-bottom:20px;}
.section img {width:100%; border-radius:12px; box-shadow:0 6px 18px rgba(0,0,0,0.3); margin-bottom:15px;}
.section .grid {display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px;}
.card {background:rgba(255,255,255,0.05); padding:15px; border-radius:12px; text-align:center; color:white; font-weight:500; box-shadow:0 4px 12px rgba(0,0,0,0.3);}
.finCard {background:linear-gradient(45deg,#0d1b2a,#2e7d32); color:white; border-radius:18px; padding:20px; margin-bottom:20px;}
.dashboard {display:none; padding:50px; max-width:1000px; margin:auto; background:rgba(5,10,30,0.9); border-radius:14px; color:white;}
</style>
</head>
<body>

<header>
<div class="logo">GoPay Africa</div>
<div class="menu3" onclick="toggleMenu()">Menu ☰</div>
</header>

<div id="menuPanel" class="menuPanel">
<p onclick="scrollToSection('why')">Pourquoi nous rejoindre</p>
<p onclick="scrollToSection('success')">Succès</p>
<p onclick="scrollToSection('values')">Valeurs</p>
<p onclick="scrollToSection('mission')">Mission & Stats</p>
<p onclick="scrollToSection('partners')">Partenaires</p>
<p onclick="scrollToSection('marketing')">Réalisations</p>
<p onclick="scrollToSection('contact')">Contact</p>
<p onclick="openLogin()">Connexion</p>
</div>

<section class="hero">
<h1>Bienvenue chez GoPay Africa</h1>
<p>Paiements rapides et sécurisés pour toute l’Afrique</p>
<button onclick="openLogin()">Se connecter</button>
</section>

<!-- Sections -->
<section id="why" class="section">
<h2><i class='bx bx-bulb'></i> Pourquoi nous rejoindre</h2>
<div class="grid">
<div class="card">
<img src="https://images.unsplash.com/photo-1573164574390-9a2ed0c4cbbf" alt="Femme avec tablette">
<p>Innovation digitale</p>
</div>
<div class="card">
<img src="https://images.unsplash.com/photo-1605902711622-cfb43c4437b5" alt="Sécurité financière">
<p>Sécurité financière</p>
</div>
<div class="card">
<img src="https://images.unsplash.com/photo-1519389950473-47ba0277781c" alt="Support 24/7">
<p>Support 24/7</p>
</div>
</div>
</section>

<section id="success" class="section">
<h2><i class='bx bx-trophy'></i> Succès</h2>
<div class="grid">
<div class="card">
<img src="https://images.unsplash.com/photo-1554224155-1696413565d3" alt="Client heureux">
<p>Clients satisfaits</p>
</div>
<div class="card">
<img src="https://images.unsplash.com/photo-1521791136064-7986c2920216" alt="Paiement mobile">
<p>Paiements mobiles rapides</p>
</div>
</div>
</section>

<section id="values" class="section">
<h2><i class='bx bx-diamond'></i> Valeurs</h2>
<div class="grid">
<div class="card">Fiabilité</div>
<div class="card">Innovation</div>
<div class="card">Inclusion financière</div>
</div>
</section>

<section id="mission" class="section">
<h2><i class='bx bx-target-lock'></i> Mission</h2>
<p>Offrir des services financiers accessibles à toute l’Afrique</p>
<div class="grid">
<div class="card">1M+ utilisateurs</div>
<div class="card">500k transactions/mois</div>
<div class="card">98% satisfaction</div>
</div>
</section>

<section id="partners" class="section">
<h2><i class='bx bx-group'></i> Partenaires</h2>
<div class="grid">
<div class="card"><img src="https://images.unsplash.com/photo-1554224154-26032cdc5c6f" alt="Partenaire 1"></div>
<div class="card"><img src="https://images.unsplash.com/photo-1605902711622-cfb43c4437b5" alt="Partenaire 2"></div>
</div>
</section>

<section id="marketing" class="section">
<h2><i class='bx bx-line-chart'></i> Réalisations</h2>
<div class="grid">
<div class="card"><img src="https://images.unsplash.com/photo-1605902711622-cfb43c4437b5" alt="Expansion"><p>Expansion africaine</p></div>
</div>
</section>

<section id="contact" class="section">
<h2><i class='bx bx-envelope'></i> Contact</h2>
<p>Email : gotrustpayinfo@gmail.com</p>
</section>

<!-- DASHBOARDS & FINTECH FEATURES -->
<div id="clientDash" class="dashboard">
  <h2>Dashboard Client</h2>
  <div class="finCard">
    <h3 id="cName">Nom du client</h3>
    <p>Solde: $<span id="cBalance">0</span></p>
    <canvas id="cQR"></canvas>
  </div>
  <h3>Historique Récent</h3>
  <div id="clientHistory"></div>
  <h3>Activités Récentes</h3>
  <div id="recentActivities"></div>
</div>

<div id="agentDash" class="dashboard">
  <h2>Dashboard Agent</h2>
  <p>Gestion cash-in / cash-out clients</p>
  <div id="agentTransactions"></div>
</div>

<div id="adminDash" class="dashboard">
  <h2>Dashboard Admin</h2>
  <div id="adminUsers"></div>
  <div id="adminStats"></div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>

<script>
// Firebase init
firebase.initializeApp({
  apiKey:"AIzaSyA-p_WgDeRhaGsP0zJYmd9aIw7GwuC6k6g",
  authDomain:"gotrustpay-e6524.firebaseapp.com",
  projectId:"gotrustpay-e6524"
});
const auth=firebase.auth();
const db=firebase.firestore();

// Menu toggle
function toggleMenu() {
  const panel = document.getElementById('menuPanel');
  panel.style.display = panel.style.display==='block'?'none':'block';
}
function scrollToSection(id) {
  document.getElementById(id).scrollIntoView({behavior:'smooth'});
  toggleMenu();
}
function openLogin(){alert('Ouvre modal de connexion ici');}

// Load dashboards
function loadDashboards(uid){
  document.querySelectorAll("section").forEach(s=>s.style.display="none");
  db.collection("users").doc(uid).get().then(doc=>{
    let u=doc.data();
    if(u.role==="client"){
      clientDash.style.display="block"; agentDash.style.display="none"; adminDash.style.display="none";
      cName.innerText=u.name; cBalance.innerText=u.balance;
      QRCode.toCanvas(cQR,uid);
      loadClientHistory(uid); loadRecentActivities(uid);
    }
    if(u.role==="agent"){
      agentDash.style.display="block"; clientDash.style.display="none"; adminDash.style.display="none";
      loadAgentTransactions();
    }
    if(u.role==="admin"){
      adminDash.style.display="block"; clientDash.style.display="none"; agentDash.style.display="none";
      loadAdminUsers(); loadAdminStats();
    }
    // Actualisation toutes les 3 secondes
    setInterval(()=>{
      if(auth.currentUser) loadClientHistory(auth.currentUser.uid);
      if(auth.currentUser) loadRecentActivities(auth.currentUser.uid);
    },3000);
  });
}

// Historiques et activités
function loadClientHistory(uid){
  db.collection("transactions").where("user","==",uid).orderBy("timestamp","desc").get().then(snap=>{
    clientHistory.innerHTML='';
    snap.forEach(doc=>{clientHistory.innerHTML+=`<p>${doc.data().type} - $${doc.data().amount}</p>`;});
  });
}
function loadRecentActivities(uid){
  db.collection("transactions").orderBy("timestamp","desc").limit(5).get().then(snap=>{
    recentActivities.innerHTML='';
    snap.forEach(doc=>{recentActivities.innerHTML+=`<p>${doc.data().user} - ${doc.data().type} - $${doc.data().amount}</p>`;});
  });
}
function loadAgentTransactions(){
  db.collection("transactions").orderBy("timestamp","desc").get().then(snap=>{
    agentTransactions.innerHTML='';
    snap.forEach(doc=>{agentTransactions.innerHTML+=`<p>${doc.data().user} - ${doc.data().type} - $${doc.data().amount}</p>`;});
  });
}
function loadAdminUsers(){
  db.collection("users").get().then(snap=>{
    adminUsers.innerHTML='';
    snap.forEach(doc=>{adminUsers.innerHTML+=`<p>${doc.data().name} - ${doc.data().role} - Solde: $${doc.data().balance}</p>`;});
  });
}
function loadAdminStats(){
  db.collection("transactions").get().then(snap=>{
    let total = snap.docs.reduce((acc,d)=>acc+d.data().amount,0);
    adminStats.innerHTML=`<h3>Total Transactions: $${total}</h3><p>Nombre de transactions: ${snap.docs.length}</p>`;
  });
}

// Auto load
auth.onAuthStateChanged(user=>{if(user) loadDashboards(user.uid);});
</script>

</body>
</html>

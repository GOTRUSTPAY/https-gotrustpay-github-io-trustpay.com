<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>GoPay Africa Pro</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Font -->
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">

<style>
body{margin:0;font-family:'Roboto',Arial;background:#061e1c;color:#e6fffa;}
header{display:flex;justify-content:space-between;align-items:center;padding:15px 20px;background:#012b28;box-shadow:0 2px 10px rgba(0,0,0,.4);position:sticky;top:0;z-index:100;}
.logo{font-size:22px;font-weight:700;letter-spacing:1px;}
.menu-btn{font-size:32px;cursor:pointer;}
.menu{position:absolute;top:60px;right:20px;background:#043837;border-radius:12px;overflow:hidden;display:none;z-index:200;}
.menu a{display:block;padding:12px 18px;text-decoration:none;color:#5eead4;font-weight:500;}
.menu a:hover{background:#065f5b}
main{max-width:1000px;margin:auto;padding:20px}
.hidden{display:none}
.panel{background:#043837;padding:20px;border-radius:18px;margin-top:20px;}
.bank-card{background:linear-gradient(135deg,#064e4b,#0f766e);border-radius:22px;padding:25px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 15px 40px rgba(0,0,0,.6);margin-top:20px;flex-wrap:wrap;}
.card-left h3{margin:0;font-weight:500}
.card-left h1{margin:10px 0;font-size:28px}
.card-left small{opacity:.8}
.card-qr{background:#fff;padding:10px;border-radius:12px;margin-top:10px;}
.actions{display:grid;grid-template-columns:repeat(4,1fr);gap:15px;margin-top:25px;}
.action{background:#0d9488;padding:18px;border-radius:16px;text-align:center;font-weight:600;cursor:pointer;font-size:14px;}
.action:hover{background:#14b8a6}
@media(max-width:600px){.actions{grid-template-columns:repeat(2,1fr)}}
input,select,button{width:100%;padding:14px;margin:8px 0;border:none;border-radius:12px;font-size:15px;}
button{background:#14b8a6;font-weight:700;cursor:pointer;}
.tx{background:#065f5b;padding:10px;border-radius:10px;margin-bottom:8px;}
footer{text-align:center;padding:15px;font-size:14px;opacity:.8;margin-top:30px;}
footer a{color:#5eead4;text-decoration:none;margin:0 5px}
footer img{width:120px;margin-bottom:10px}
.hero-img{width:100%;border-radius:18px;margin-top:20px}
.admin-table{width:100%;border-collapse:collapse;margin-top:15px;}
.admin-table th, .admin-table td{border:1px solid #065f5b;padding:10px;text-align:left;}
.admin-table th{background:#0d9488;}
.online-count{margin-top:15px;font-weight:700;color:#14b8a6;}
.last-move{margin-top:10px;font-size:14px;color:#5eead4;}
</style>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>

<body>

<header>
 <div class="logo">GoPay Africa Pro</div>
 <div class="menu-btn" onclick="toggleMenu()">‚ò∞</div>
</header>

<div class="menu" id="menu">
 <a onclick="show('home')">Accueil</a>
 <a onclick="show('login')">Connexion</a>
 <a onclick="show('register')">Inscription</a>
 <a onclick="show('services')">Nos services</a>
 <a onclick="show('about')">Qui sommes-nous</a>
 <a onclick="show('contact')">Contact</a>
 <a onclick="logout()">D√©connexion</a>
</div>

<main>
<!-- Accueil -->
<div id="home" class="panel">
<h2>Payments for a Connected Africa</h2>
<p>Paiements digitaux s√©curis√©s, transparents et fiables.</p>
<img src="https://images.unsplash.com/photo-1591696331110-69a9b3679f3d?fit=crop&w=900&q=80" alt="Finance Africa" class="hero-img">
</div>

<!-- Services -->
<div id="services" class="panel hidden">
<h3>Nos services</h3>
<ul>
<li>Paiements digitaux rapides</li>
<li>Cash‚Äëin et Cash‚Äëout s√©curis√©s</li>
<li>Comptes utilisateurs et agents GoPay</li>
<li>Support client disponible 24/7</li>
</ul>
</div>

<!-- About -->
<div id="about" class="panel hidden">
<h3>Qui sommes-nous</h3>
<p>GoPay Africa est une plateforme innovante de paiement digital visant √† connecter toute l'Afrique de mani√®re s√©curis√©e et fiable.</p>
</div>

<!-- Contact -->
<div id="contact" class="panel hidden">
<h3>Contactez-nous</h3>
<p>Email: support@gopay.africa</p>
<p>T√©l√©phone: +250 788 123 456</p>
</div>

<!-- Connexion -->
<div id="login" class="panel hidden">
<h3>Connexion</h3>
<input id="lEmail" placeholder="Email">
<input id="lPass" type="password" placeholder="Mot de passe">
<button onclick="login()">Se connecter</button>
</div>

<!-- Inscription -->
<div id="register" class="panel hidden">
<h3>Inscription</h3>
<input id="rName" placeholder="Nom complet">
<input id="rPhone" placeholder="T√©l√©phone">
<input id="rEmail" placeholder="Email">
<input id="rPass" type="password" placeholder="Mot de passe">
<select id="rRole">
 <option value="user">Utilisateur</option>
 <option value="agent">Agent GoPay</option>
 <option value="admin">Admin</option>
</select>
<button onclick="register()">Cr√©er le compte</button>
</div>

<!-- Dashboard -->
<div id="dash" class="hidden">

<div class="bank-card">
 <div class="card-left">
  <h3 id="uName"></h3>
  <small>ID GoPay</small>
  <div><b id="uId"></b></div>
  <h1><span id="uBal"></span> USD</h1>
  <small>Carte digitale s√©curis√©e</small>
  <div class="last-move" id="lastMove"></div>
 </div>
 <div class="card-qr" id="qr"></div>
</div>

<div class="actions">
 <div class="action" id="payBtn" onclick="openP('pay')">üí≥ Paiement</div>
 <div class="action hidden" id="cashinBtn" onclick="openP('cashin')">‚ûï Cash‚Äëin</div>
 <div class="action hidden" id="cashoutBtn" onclick="openP('cashout')">‚ûñ Cash‚Äëout</div>
 <div class="action" onclick="openP('history')">üìú Historique</div>
</div>

<div id="pay" class="panel hidden">
<input id="payTo" placeholder="ID destinataire">
<input id="payAmount" type="number" placeholder="Montant USD">
<button onclick="pay()">Payer</button>
</div>

<div id="cashin" class="panel hidden">
<input id="cinAmount" type="number" placeholder="Montant USD">
<button onclick="cashin()">Valider</button>
</div>

<div id="cashout" class="panel hidden">
<input id="coutAmount" type="number" placeholder="Montant USD">
<button onclick="cashout()">Valider</button>
</div>

<div id="history" class="panel hidden">
<h3>Historique des transactions</h3>
<label>Filtrer par type:</label>
<select id="filterType" onchange="loadTx()">
<option value="">Tous</option>
<option value="Paiement">Paiement</option>
<option value="Cash‚Äëin">Cash‚Äëin</option>
<option value="Cash‚Äëout">Cash‚Äëout</option>
</select>
<label>Filtrer par date:</label>
<input type="date" id="filterDate" onchange="loadTx()">
<div id="txs"></div>
</div>

<div id="admin" class="panel hidden">
<h3>Admin: Comptes utilisateurs</h3>
<div class="online-count" id="onlineCount">Utilisateurs connect√©s: 0</div>
<table class="admin-table" id="usersTable">
<tr><th>Nom</th><th>ID GoPay</th><th>R√¥le</th><th>Balance</th><th>Actif</th></tr>
</table>
</div>

</main>

<footer>
<img src="https://upload.wikimedia.org/wikipedia/commons/3/3a/GoPay_logo.png" alt="GoPay Logo">
<p>¬© 2026 GoPay Africa. Tous droits r√©serv√©s.</p>
<a href="#">Mentions l√©gales</a> | <a href="#">Politique de confidentialit√©</a>
</footer>

<script>
// Firebase
firebase.initializeApp({
 apiKey:"AIzaSyA-p_WgDeRhaGsP0zJYmd9aIw7GwuC6k6g",
 authDomain:"gotrustpay-e6524.firebaseapp.com",
 projectId:"gotrustpay-e6524"
});
const auth=firebase.auth(),db=firebase.firestore();

// Notifications
if ("Notification" in window) Notification.requestPermission();
function notify(title,msg){if(Notification.permission==="granted")new Notification(title,{body:msg});}

function toggleMenu(){menu.style.display=menu.style.display=="block"?"none":"block"}
function show(id){document.querySelectorAll("main>div").forEach(x=>x.classList.add("hidden"));document.getElementById(id).classList.remove("hidden");menu.style.display="none";}
function openP(id){["pay","cashin","cashout","history"].forEach(x=>document.getElementById(x).classList.add("hidden"));document.getElementById(id).classList.remove("hidden");}
function genId(){return "GP-"+Math.random().toString(36).substr(2,8).toUpperCase()}

function register(){auth.createUserWithEmailAndPassword(rEmail.value,rPass.value).then(c=>{db.collection("users").doc(c.user.uid).set({name:rName.value,phone:rPhone.value,role:rRole.value,gid:genId(),balance:50,active:true}).then(()=>alert("Compte cr√©√© !"))}).catch(e=>alert(e.message));}
function login(){auth.signInWithEmailAndPassword(lEmail.value,lPass.value).then(()=>db.collection("users").doc(auth.currentUser.uid).update({active:true})).catch(e=>alert("Erreur connexion: "+e.message));}
function logout(){if(auth.currentUser)db.collection("users").doc(auth.currentUser.uid).update({active:false});auth.signOut();}

auth.onAuthStateChanged(async u=>{
 if(!u){show("home");return}
 const d=await db.collection("users").doc(u.uid).get();
 const x=d.data();
 show("dash");
 uName.textContent=x.name+" ("+x.role+")";
 uId.textContent=x.gid;
 uBal.textContent=x.balance.toFixed(2);
 qr.innerHTML="";new QRCode(qr,{text:x.gid,width:120,height:120});
 lastMove.textContent="Dernier mouvement: Aucun";

 if(x.role==="agent"){cashinBtn.classList.remove("hidden");cashoutBtn.classList.remove("hidden");payBtn.classList.add("hidden");}
 else{payBtn.classList.remove("hidden");cashinBtn.classList.add("hidden");cashoutBtn.classList.add("hidden");}

 if(x.role==="admin"){document.getElementById("admin").classList.remove("hidden");loadUsers();countOnline();}

 loadTx();
});

// Transactions avec notification et derni√®re action
function tx(type,amount){ 
 db.collection("transactions").add({uid:auth.currentUser.uid,type,amount,date:new Date()});
 lastMove.textContent="Dernier mouvement: "+type+" "+amount+" USD";
 if(document.getElementById("admin").classList.contains("panel") && auth.currentUser){notify("Nouvelle transaction", type+" de "+amount+" USD");loadUsers();countOnline();}
}

function pay(){ const amount=parseFloat(payAmount.value); if(amount<=0)return alert("Montant invalide"); db.collection("users").doc(auth.currentUser.uid).update({balance:firebase.firestore.FieldValue.increment(-amount)}); tx("Paiement",-amount); notify("Paiement effectu√©", `Vous avez pay√© ${amount} USD`); payAmount.value=""; loadTx();}
function cashin(){ const amount=parseFloat(cinAmount.value); if(amount<=0)return alert("Montant invalide"); db.collection("users").doc(auth.currentUser.uid).update({balance:firebase.firestore.FieldValue.increment(amount)}); tx("Cash‚Äëin",amount); notify("Cash‚Äëin r√©ussi", `Vous avez ajout√© ${amount} USD`); cinAmount.value=""; loadTx();}
function cashout(){ const amount=parseFloat(coutAmount.value); if(amount<=0)return alert("Montant invalide"); db.collection("users").doc(auth.currentUser.uid).update({balance:firebase.firestore.FieldValue.increment(-amount)}); tx("Cash‚Äëout",-amount); notify("Cash‚Äëout r√©ussi", `Vous avez retir√© ${amount} USD`); coutAmount.value=""; loadTx();}

async function loadTx(){txs.innerHTML="";const filterT=filterType.value;const filterD=filterDate.value;let q=db.collection("transactions").where("uid","==",auth.currentUser.uid).orderBy("date","desc");const snap=await q.get();snap.forEach(d=>{const t=d.data();const tDate=t.date.toDate().toISOString().split('T')[0];if((!filterT||t.type==filterT)&&(!filterD||tDate==filterD))txs.innerHTML+=`<div class="tx">${t.type} : ${t.amount} USD (${tDate})</div>`;});}

async function loadUsers(){const q=await db.collection("users").get();usersTable.innerHTML='<tr><th>Nom</th><th>ID GoPay</th><th>R√¥le</th><th>Balance</th><th>Actif</th></tr>';q.forEach(d=>{const u=d.data();usersTable.innerHTML+=`<tr><td>${u.name}</td><td>${u.gid}</td><td>${u.role}</td><td>${u.balance} USD</td><td>${u.active?"Oui":"Non"}</td></tr>`;});}

async function countOnline(){const q=await db.collection("users").where("active","==",true).get();onlineCount.textContent="Utilisateurs connect√©s: "+q.size;}
</script>

</body>
</html>

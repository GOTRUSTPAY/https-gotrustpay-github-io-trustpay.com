<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GoTrust Pay</title>
<style>
  body { margin:0; font-family: Arial, sans-serif; background:#f5f5f5; color:#333; }
  header { background:#0a74da; color:#fff; padding:20px; text-align:center; }
  nav { display:flex; justify-content:center; gap:15px; padding:10px; background:#0073c2; flex-wrap:wrap;}
  nav a { color:#fff; text-decoration:none; font-weight:bold; }
  main { max-width:1000px; margin:20px auto; padding:20px; background:#fff; border-radius:10px; box-shadow:0 0 10px rgba(0,0,0,0.1); }
  h2 { color:#0a74da; margin-top:0; }
  button { background:#0a74da; color:#fff; border:none; padding:10px 20px; border-radius:5px; cursor:pointer; margin-top:5px; }
  input, select, textarea { padding:10px; margin:5px 0; width:100%; box-sizing:border-box; }
  .section { margin-bottom:40px; }
  .hidden { display:none; }
  .card { border:1px solid #ddd; padding:15px; border-radius:8px; margin-bottom:15px; background:#f9f9f9; }
  .qr { width:100px; height:100px; display:inline-block; margin-right:10px; vertical-align:middle; }
  label { font-weight:bold; display:block; margin-top:10px; }
  .menu { display:flex; gap:10px; margin-bottom:20px; flex-wrap:wrap; }
</style>
</head>
<body>

<header>
  <h1>GoTrust Pay</h1>
  <p>Plateforme financière sécurisée</p>
</header>

<nav>
  <a href="#" onclick="showSection('home')">Accueil</a>
  <a href="#" onclick="showSection('login')">Connexion</a>
  <a href="#" onclick="showSection('contact')">Contact / Besoin d'aide</a>
  <a href="#" onclick="showSection('about')">Qui sommes-nous ?</a>
  <a href="#" onclick="showSection('services')">Nos services</a>
  <a href="#" onclick="showSection('partners')">Nos partenaires</a>
</nav>

<main>
  <div class="section" id="home">
    <h2>Bienvenue sur GoTrust Pay</h2>
    <p>GoTrust Pay est une plateforme financière sécurisée pour la gestion de vos paiements, dépôts, retraits et prêts.</p>
    <p>Adresse : Goma, Nord Kivu, RDC</p>
  </div>

  <div class="section hidden" id="login">
    <h2>Connexion</h2>
    <label>Statut</label>
    <select id="loginStatus">
      <option value="client">Client</option>
      <option value="agent">Agent</option>
      <option value="admin">Administrateur</option>
    </select>
    <input type="text" id="loginId" placeholder="Numéro ID">
    <input type="password" id="loginPassword" placeholder="Mot de passe">
    <button onclick="login()">Se connecter</button>

    <div id="inlineRegister" style="margin-top:20px; border-top:1px solid #ddd; padding-top:15px;">
      <h3>Créer un compte client</h3>
      <label>Nom complet</label><input type="text" id="regName">
      <label>Email</label><input type="email" id="regEmail">
      <label>Téléphone</label><input type="text" id="regPhone">
      <label>Mot de passe (8 chiffres)</label><input type="password" id="regPassword">
      <label>Code de retrait (6 chiffres)</label><input type="text" id="regCode">
      <button onclick="register()">S'inscrire et accéder au tableau de bord</button>
    </div>
  </div>

  <div class="section hidden" id="clientDashboard">
    <h2>Tableau de bord Client</h2>
    <div class="card">
      <h3>Carte Virtuelle</h3>
      <canvas id="clientQR" class="qr"></canvas>
      <p>ID : <span id="clientIdDisplay"></span></p>
      <p>Numéro de carte : <span id="clientCardNumber"></span></p>
      <p>Solde : <span id="clientBalance">0.00 USD</span></p>
      <button onclick="downloadQR()">Télécharger Carte</button>
    </div>

    <div class="menu">
      <button onclick="showClientSection('deposit')">Déposer</button>
      <button onclick="showClientSection('withdraw')">Retirer</button>
      <button onclick="showClientSection('send')">Envoyer argent</button>
      <button onclick="showClientSection('loan')">Demande de prêt</button>
      <button onclick="showClientSection('chat')">Chat</button>
    </div>

    <div id="clientActions">
      <div class="hidden" id="deposit">
        <h3>Déposer de l'argent</h3>
        <input type="number" id="depositAmount" placeholder="Montant">
        <label>Choisir service</label>
        <select id="depositService">
          <option value="gopay">GoPay</option>
          <option value="airtel">Airtel Money</option>
          <option value="orange">Orange Money</option>
          <option value="vodacom">M-Pesa Vodacom</option>
        </select>
        <button onclick="deposit()">Confirmer Dépôt</button>
      </div>

      <div class="hidden" id="withdraw">
        <h3>Retirer de l'argent</h3>
        <input type="number" id="withdrawAmount" placeholder="Montant">
        <label>Service de retrait</label>
        <select id="withdrawService">
          <option value="gopay">GoPay</option>
          <option value="airtel">Airtel Money</option>
          <option value="orange">Orange Money</option>
          <option value="vodacom">M-Pesa Vodacom</option>
        </select>
        <input type="text" id="withdrawCode" placeholder="Code de retrait">
        <button onclick="withdraw()">Confirmer Retrait</button>
      </div>

      <div class="hidden" id="send">
        <h3>Envoyer de l'argent</h3>
        <input type="number" id="sendAmount" placeholder="Montant">
        <label>Service</label>
        <select id="sendService">
          <option value="gopay">GoPay</option>
          <option value="airtel">Airtel Money</option>
          <option value="orange">Orange Money</option>
          <option value="vodacom">M-Pesa Vodacom</option>
        </select>
        <input type="text" id="sendRecipient" placeholder="Numéro ou ID destinataire">
        <input type="password" id="sendPassword" placeholder="Mot de passe">
        <button onclick="sendMoney()">Envoyer</button>
      </div>

      <div class="hidden" id="loan">
        <h3>Demande de prêt</h3>
        <input type="text" id="loanName" placeholder="Nom complet">
        <input type="text" id="loanAddress" placeholder="Adresse">
        <input type="text" id="loanContact" placeholder="Contact">
        <input type="text" id="loanWitness1" placeholder="Témoin 1">
        <input type="text" id="loanWitness2" placeholder="Témoin 2">
        <input type="number" id="loanAmount" placeholder="Montant du prêt">
        <textarea id="loanReason" placeholder="Motif"></textarea>
        <button onclick="requestLoan()">Soumettre demande</button>
      </div>

      <div class="hidden" id="chat">
        <h3>Envoyer un message</h3>
        <input type="text" id="chatRecipient" placeholder="ID destinataire">
        <textarea id="chatMessage" placeholder="Message à envoyer"></textarea>
        <button onclick="sendChatMessage()">Envoyer</button>
        <div id="chatHistory" style="margin-top:10px;"></div>
      </div>
    </div>
  </div>

  <div class="section hidden" id="adminDashboard">
    <h2>Tableau de bord Admin</h2>
    <div class="menu">
      <button onclick="showAdminSection('publish')">Publier message</button>
      <button onclick="showAdminSection('clients')">Clients / Agents</button>
      <button onclick="showAdminSection('loans')">Demandes de prêt</button>
      <button onclick="showAdminSection('withdrawals')">Demandes de retrait</button>
      <button onclick="showAdminSection('history')">Historique</button>
      <button onclick="showAdminSection('messages')">Envoyer message</button>
    </div>
    <div id="adminActions">
      <div class="hidden" id="publish">
        <h3>Publier un message sur l'accueil</h3>
        <textarea id="adminMessage" placeholder="Écrire message ici..."></textarea>
        <input type="file" id="adminFile">
        <button onclick="publishMessage()">Publier</button>
      </div>

      <div class="hidden" id="clients">
        <h3>Clients et Agents enregistrés</h3>
        <div id="clientsList"></div>
      </div>

      <div class="hidden" id="loans">
        <h3>Demandes de prêt</h3>
        <div id="loansList"></div>
      </div>

      <div class="hidden" id="withdrawals">
        <h3>Demandes de retrait</h3>
        <div id="withdrawList"></div>
      </div>

      <div class="hidden" id="history">
        <h3>Historique de la plateforme</h3>
        <div id="historyList"></div>
      </div>

      <div class="hidden" id="messages">
        <h3>Envoyer un message à un client</h3>
        <input type="text" id="msgClientId" placeholder="ID client">
        <textarea id="msgContent" placeholder="Message à envoyer"></textarea>
        <button onclick="sendAdminMessage()">Envoyer</button>
      </div>
    </div>
  </div>

  <div class="section hidden" id="contact">
    <h2>Contact / Besoin d'aide</h2>
    <p>Email : gotrustpayinfo@gmail.com</p>
    <p>Adresse : Goma, Nord Kivu, RDC</p>
  </div>

  <div class="section hidden" id="about">
    <h2>Qui sommes-nous ?</h2>
    <p>GoTrust Pay est une plateforme financière sécurisée pour faciliter vos transactions, dépôts, retraits et prêts.</p>
  </div>

  <div class="section hidden" id="services">
    <h2>Nos services</h2>
    <ul>
      <li>Gestion de comptes</li>
      <li>Dépôt et retrait via GoPay et services locaux</li>
      <li>Envoi d’argent</li>
      <li>Demandes de prêt sécurisées</li>
    </ul>
  </div>

  <div class="section hidden" id="partners">
    <h2>Nos partenaires</h2>
    <ul>
      <li>Banque fictive ABC</li>
      <li>Service mobile XYZ</li>
      <li>FinancePlus</li>
    </ul>
  </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/qrious@4.0.2/dist/qrious.min.js"></script>
<script>
let users = [];
let loans = [];
let history = [];
let currentUser = null;

function showSection(id){document.querySelectorAll('main .section').forEach(s=>s.classList.add('hidden'));document.getElementById(id).classList.remove('hidden');}

function generateId(){return Math.floor(10000000+Math.random()*90000000);}
function generateCard(){return Math.floor(100000000000+Math.random()*900000000000);}

function register(){
  let name=document.getElementById('regName').value,
      email=document.getElementById('regEmail').value,
      phone=document.getElementById('regPhone').value,
      password=document.getElementById('regPassword').value,
      code=document.getElementById('regCode').value;
  if(!name||!email||!phone||!password||!code){alert('Remplir tous les champs');return;}
  let user={id:generateId(),name,email,phone,password,code,balance:0,cardNumber:generateCard(),status:'client'};
  users.push(user);
  currentUser=user;
  updateClientCard(user);generateQR(user);showSection('clientDashboard');
  ['regName','regEmail','regPhone','regPassword','regCode'].forEach(id=>document.getElementById(id).value='');
  alert('Compte créé ! Votre ID : '+user.id);
}

function login(){
  let status=document.getElementById('loginStatus').value,
      id=document.getElementById('loginId').value.trim(),
      pwd=document.getElementById('loginPassword').value;
  if(status==='admin' && id==='gopay' && pwd==='admin243'){currentUser={name:'Administrateur',id:'gopay',status:'admin'};showSection('adminDashboard');return;}
  let user=users.find(u=>(u.id==id) && u.password===pwd && u.status===status);
  if(!user){alert('Utilisateur introuvable ou mot de passe incorrect');return;}
  currentUser=user;
  showSection('clientDashboard');updateClientCard(user);generateQR(user);
}

function updateClientCard(user){
  document.getElementById('clientIdDisplay').textContent=user.id;
  document.getElementById('clientCardNumber').textContent=user.cardNumber;
  document.getElementById('clientBalance').textContent=user.balance.toFixed(2)+' USD';
}

function generateQR(user){new QRious({element:document.getElementById('clientQR'),value:`ID:${user.id} Name:${user.name}`});}
function downloadQR(){let canvas=document.getElementById('clientQR'),link=document.createElement('a');link.href=canvas.toDataURL('image/png');link.download='carte_gopay.png';link.click();}

function showClientSection(id){document.querySelectorAll('#clientActions > div').forEach(d=>d.classList.add('hidden'));document.getElementById(id).classList.remove('hidden');}
function deposit(){let amt=parseFloat(document.getElementById('depositAmount').value);if(isNaN(amt)||amt<=0){alert('Montant invalide');return;}currentUser.balance+=amt;updateClientCard(currentUser);history.push({type:'dépôt',user:currentUser.name,amount:amt,date:new Date()});alert('Dépôt effectué');}
function withdraw(){let amt=parseFloat(document.getElementById('withdrawAmount').value),code=document.getElementById('withdrawCode').value;if(isNaN(amt)||amt<=0){alert('Montant invalide');return;}if(code!==currentUser.code){alert('Code incorrect');return;}if(currentUser.balance<amt){alert('Solde insuffisant');return;}currentUser.balance-=amt;updateClientCard(currentUser);history.push({type:'retrait',user:currentUser.name,amount:amt,date:new Date()});alert('Retrait effectué');}
function sendMoney(){let amt=parseFloat(document.getElementById('sendAmount').value),recipient=document.getElementById('sendRecipient').value,pwd=document.getElementById('sendPassword').value;if(pwd!==currentUser.password){alert('Mot de passe incorrect');return;}let rec=users.find(u=>u.id==recipient);if(!rec){alert('Destinataire introuvable');return;}if(currentUser.balance<amt){alert('Solde insuffisant');return;}currentUser.balance-=amt;rec.balance+=amt;updateClientCard(currentUser);history.push({type:'envoi',user:currentUser.name,amount:amt,to:rec.name,date:new Date()});alert('Envoi effectué');}
function requestLoan(){loans.push({user:currentUser.name,date:new Date()});alert('Demande de prêt reçue, en cours d’analyse');}

function showAdminSection(id){document.querySelectorAll('#adminActions > div').forEach(d=>d.classList.add('hidden'));document.getElementById(id).classList.remove('hidden');}
function publishMessage(){alert('Message publié sur l’accueil');}
function sendAdminMessage(){alert('Message envoyé au client ID '+document.getElementById('msgClientId').value);}
</script>

</body>
</html>
